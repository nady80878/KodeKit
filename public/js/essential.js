$(function(){function t(t,e){var n=new RegExp(t);return n.test(e)}function e(t,e,n,a,o){$.ajax({url:t,type:"POST",xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",o,!1),myXhr},success:n,error:a,data:e,cache:!1,contentType:!1,processData:!1},"json")}var n=$(".user-role");n.on("click",function(){$("#role").val($(this).data("role"))});var a=$(".error-box");$.trim(a.text()).length>0&&(a.slideDown(700),$(document).on("click",function(){a.slideUp(700)}));var o=$("input[name=name]"),i=$("input[name=email]"),r=$("input[id=pass]"),l=$("input[name=repass]"),c=$("input[name=tel]"),u=$("input[name=mobile]");o.on("keyup focus",function(){var e=$(this).val().trim(),n="";n=""==e?"اسم الشخص مطلوب":t(/[^a-zA-Z \u0600-\u06ff\u0750-\u077f\ufb50-\ufc3f\ufe70-\ufefc]/,e)&&e.length>=2?"اسم الشخص لا يمكن ان يحتوي علي ارقام او اي رموز خاصه":"الاسم صحيح",$(".status").show().text(n)}).on("blur",function(){$(".status").hide()}),i.on("keyup focus",function(){var e=$(this).val().trim(),n="";n=""==e?"الايميل مطلوب":t(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e)?"الايميل صحيح":"صيغه الايميل غير صحيحة",$(".status").show().text(n)}).on("blur",function(){$(".status").hide()}),r.on("keyup focus",function(){var e=$(this).val().trim(),n="";n=""==e?"الباسورد مطلوب":!t(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/,e)||e.length<8?"صيغه الباسورد لابد ان يحتوي علي حرف كبير و حرف صغير و رقم و علي الاقل 8 احرف":"الباسورد صحيح",$(".status").show().text(n)}).on("blur",function(){$(".status").hide()}),c.on("keyup",function(){var e=$(this).val().trim(),n="";n=!t(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i,e)||e.length<10?"الهاتف غير صحيح لاحظ انه لا يسمح بغير الارقام او - او+ او () او المسافات و لا يقل عن 10 رقم":"الهاتف صحيح",$(".status").show().text(n)}).on("blur",function(){$(".status").hide()}),u.on("keyup focus",function(){var e=$(this).val().trim(),n="";n=""==e?"الموبايل مطلوب":!t(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i,e)||e.length<10?"الموبايل غير صحيح لاحظ انه لا يسمح بغير الارقام او - او+ او () او المسافات و لا يقل عن 10 رقم":"الموبايل صحيح",$(".status").show().text(n)}).on("blur",function(){$(".status").hide()}),l.on("keyup focus",function(){var t=$(this).val().trim(),e="";e=""==t?"اعادة الباسورد مطلوبه":r.val()!=t?"اعادة الباسورد غير متطابقه":"اعادة الباسورد متطابقه",$(".status").show().text(e)}).on("blur",function(){$(".status").hide()});var s=$(".read-more");s.on("click",function(t){t.preventDefault();var n=$(this),a=n.data("complainId");e("http://localhost/clinic/complain/desc/"+a,null,function(t){$("#modalLabel").text(t.diagnostic);var e="<h6> <b><u>Date</u>: </b></h6><p>"+t.created_at+"</p><h6> <b><u>Status</u>: </b></h6><p>"+t.status+"</p><p><h6> <b><u>Description</u>: </b></h6></p><p>"+t.description+"</p>";$("#modalBody").html(e),$("#btn-delete").attr("data-id",t.id),$("#btn-delete").attr("data-role","complain"),$("#myModal").modal("toggle")},function(){alert("Error")})});var d=$(".patient");d.on("click",function(t){t.preventDefault();var n=$(this),a=n.data("patientId");e("http://localhost/clinic/patient/desc/"+a,null,function(t){$("#modalLabel").text(t.name);var e="<h6> <b><u>Email</u>: </b></h6><p>"+t.email+"</p><h6> <b><u>Mobile</u>: </b></h6><p>"+t.mobile+"</p><h6> <b><u>Telephone</u>: </b></h6><p>"+t.tel+"</p><h6> <b><u>Address</u>: </b></h6><p>"+t.address+"</p><h6> <b><u>Gender</u>: </b></h6><p>"+t.gender+"</p><h6> <b><u>Joined since</u>: </b></h6><p>"+t.created_at+"</p>";$("#modalBody").html(e),$("#btn-delete").attr("data-id",t.id),$("#btn-delete").attr("data-role","patient"),$("#myModal").modal("toggle")},function(){alert("Error")})});var h=$("#btn-delete");h.on("click",function(){var t=$(this),n=t.data("role"),a=t.data("id");switch(n){case"patient":e("http://localhost/clinic/admin/user/delete/"+a,new FormData($("#account-form")[0]),function(t){t.status?location="http://localhost/clinic/":alert("Error: Couldn't delete your self from here")},function(){alert("Error")});break;case"complain":e("http://localhost/clinic/complain/delete/"+a,new FormData($("#account-form")[0]),function(t){location.reload(!0)},function(){alert("Error")})}});var p=$("#admin-complain-delete");p.on("click",function(){e("http://localhost/clinic/admin/complain/delete",new FormData($("#admin-form")[0]),function(t){alert(t),location.reload(!0)},function(){alert("Error")})});var f=$("#msg-delete");f.on("click",function(){var t=$(this),n=t.data("id");e("http://localhost/clinic/message/delete/"+n,new FormData($("#account-form")[0]),function(t){location.reload(!0)},function(){alert("Error")})});var m=$("#msg-seen");m.on("click",function(){var t=$(this),n=t.data("id");e("http://localhost/clinic/message/seen/"+n,new FormData($("#account-form")[0]),function(e){e?t.removeClass("btn-default").addClass("btn-success").attr("disabled",!0):alert("Error")},function(){alert("Error")})});var b=$("#account-delete");b.on("click",function(){e("http://localhost/clinic/user/delete",new FormData($("#account-form")[0]),function(t){t.status?location="http://localhost/clinic/":alert("Error: Couldn't delete your account, try later")},function(){alert("Error")})}),$("input[type=checkbox]").removeAttr("checked")});